import{i as l}from"./index-ClJuvLSQ.js";async function c(e,a={}){var s,h;if(!e)throw new Error("Không có file để upload");const t=10*1024*1024;if(e.size>t)throw new Error("File quá lớn. Kích thước tối đa: 10MB");if(!e.type.startsWith("image/"))throw new Error("Chỉ chấp nhận file ảnh (JPG, PNG, etc.)");const o=new FormData;o.append("file",e);try{const{data:r}=await l.post("/uploads/id-card",o,{headers:{"Content-Type":"multipart/form-data"},timeout:3e4,...a});if(!r||!r.url)throw new Error("Server không trả về URL");return r}catch(r){if(r.response){const n=r.response.status,i=((s=r.response.data)==null?void 0:s.message)||((h=r.response.data)==null?void 0:h.error);throw n===500?new Error(i||"Lỗi server khi upload. Vui lòng kiểm tra kết nối Cloudinary hoặc thử lại sau."):n===400?new Error(i||"File không hợp lệ"):n===413?new Error("File quá lớn"):n===415?new Error("Định dạng file không được hỗ trợ"):new Error(i||`Lỗi upload (${n})`)}else throw r.request?new Error("Không thể kết nối đến server. Vui lòng kiểm tra backend đã chạy chưa."):new Error(r.message||"Lỗi không xác định khi upload")}}function d(e){if(!e)return{valid:!1,error:"Không có file"};if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(e.type))return{valid:!1,error:"Định dạng không hợp lệ. Chỉ chấp nhận: JPG, PNG, GIF, WEBP"};const t=10*1024*1024;return e.size>t?{valid:!1,error:`File quá lớn (${(e.size/1024/1024).toFixed(2)}MB). Tối đa: 10MB`}:{valid:!0}}export{c as uploadFile,d as validateImageFile};
